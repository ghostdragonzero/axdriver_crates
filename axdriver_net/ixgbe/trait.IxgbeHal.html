<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The interface which a particular hardware implementation must implement."><title>IxgbeHal in axdriver_net::ixgbe - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-42caa33d.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="axdriver_net" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (6b6a867ae 2024-11-27)" data-channel="nightly" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../axdriver_net/index.html">axdriver_<wbr>net</a><span class="version">0.1.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Ixgbe<wbr>Hal</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#safety" title="Safety">Safety</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.dma_alloc" title="dma_alloc">dma_alloc</a></li><li><a href="#tymethod.dma_dealloc" title="dma_dealloc">dma_dealloc</a></li><li><a href="#tymethod.mmio_phys_to_virt" title="mmio_phys_to_virt">mmio_phys_to_virt</a></li><li><a href="#tymethod.mmio_virt_to_phys" title="mmio_virt_to_phys">mmio_virt_to_phys</a></li><li><a href="#tymethod.wait_until" title="wait_until">wait_until</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In axdriver_<wbr>net::<wbr>ixgbe</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">axdriver_net</a>::<wbr><a href="index.html">ixgbe</a></span><h1>Trait <span class="trait">IxgbeHal</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"></span></div><pre class="rust item-decl"><code>pub unsafe trait IxgbeHal: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    // Required methods
    fn <a href="#tymethod.dma_alloc" class="fn">dma_alloc</a>(size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; (<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;);
<span class="item-spacer"></span>    unsafe fn <a href="#tymethod.dma_dealloc" class="fn">dma_dealloc</a>(paddr: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, vaddr: <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.i32.html">i32</a>;
<span class="item-spacer"></span>    unsafe fn <a href="#tymethod.mmio_phys_to_virt" class="fn">mmio_phys_to_virt</a>(paddr: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;;
<span class="item-spacer"></span>    unsafe fn <a href="#tymethod.mmio_virt_to_phys" class="fn">mmio_virt_to_phys</a>(vaddr: <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.wait_until" class="fn">wait_until</a>(duration: <a class="struct" href="https://doc.rust-lang.org/nightly/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.unit.html">()</a>, &amp;'static <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.str.html">str</a>&gt;;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The interface which a particular hardware implementation must implement.</p>
<h2 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h2>
<p>Implementations of this trait must follow the “implementation safety” requirements documented
for each method. Callers must follow the safety requirements documented for the unsafe methods.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.dma_alloc" class="method"><h4 class="code-header">fn <a href="#tymethod.dma_alloc" class="fn">dma_alloc</a>(size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; (<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;)</h4></section></summary><div class="docblock"><p>Allocates and zeroes the given number of contiguous physical memory of DMA memory for Ixgbe NIC
use.</p>
<p>Returns both the physical address which the device can use to access the memory, and a
pointer to the start of it which the driver can use to access it.</p>
<h5 id="implementation-safety"><a class="doc-anchor" href="#implementation-safety">§</a>Implementation safety</h5>
<p>Implementations of this method must ensure that the <code>NonNull&lt;u8&gt;</code> returned is a
<a href="https://doc.rust-lang.org/std/ptr/index.html#safety"><em>valid</em></a> pointer, aligned to
2, and won’t alias any other allocations or references in the program until it
is deallocated by <code>dma_dealloc</code>. The pages must be zeroed.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.dma_dealloc" class="method"><h4 class="code-header">unsafe fn <a href="#tymethod.dma_dealloc" class="fn">dma_dealloc</a>(paddr: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, vaddr: <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Deallocates the given contiguous physical DMA memory pages.</p>
<h5 id="safety-1"><a class="doc-anchor" href="#safety-1">§</a>Safety</h5>
<p>The memory must have been allocated by <code>dma_alloc</code> on the same <code>Hal</code> implementation, and not
yet deallocated. <code>size</code> must be the same number passed to <code>dma_alloc</code> originally, and both
<code>paddr</code> and <code>vaddr</code> must be the values returned by <code>dma_alloc</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.mmio_phys_to_virt" class="method"><h4 class="code-header">unsafe fn <a href="#tymethod.mmio_phys_to_virt" class="fn">mmio_phys_to_virt</a>(paddr: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;</h4></section></summary><div class="docblock"><p>Converts a physical address used for MMIO to a virtual address which the driver can access.</p>
<p>This is only used for MMIO addresses within BARs read from the device, for the PCI
transport. It may check that the address range up to the given size is within the region
expected for MMIO.</p>
<h5 id="implementation-safety-1"><a class="doc-anchor" href="#implementation-safety-1">§</a>Implementation safety</h5>
<p>Implementations of this method must ensure that the <code>NonNull&lt;u8&gt;</code> returned is a
<a href="https://doc.rust-lang.org/std/ptr/index.html#safety"><em>valid</em></a> pointer, and won’t alias any
other allocations or references in the program.</p>
<h5 id="safety-2"><a class="doc-anchor" href="#safety-2">§</a>Safety</h5>
<p>The <code>paddr</code> and <code>size</code> must describe a valid MMIO region. The implementation may validate it
in some way (and panic if it is invalid) but is not guaranteed to.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.mmio_virt_to_phys" class="method"><h4 class="code-header">unsafe fn <a href="#tymethod.mmio_virt_to_phys" class="fn">mmio_virt_to_phys</a>(vaddr: <a class="struct" href="https://doc.rust-lang.org/nightly/core/ptr/non_null/struct.NonNull.html" title="struct core::ptr::non_null::NonNull">NonNull</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>&gt;, size: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Converts a virtual address used by the driver to access MMIO to a physical address which the
device can use.</p>
<h5 id="safety-3"><a class="doc-anchor" href="#safety-3">§</a>Safety</h5></div></details><details class="toggle method-toggle" open><summary><section id="tymethod.wait_until" class="method"><h4 class="code-header">fn <a href="#tymethod.wait_until" class="fn">wait_until</a>(duration: <a class="struct" href="https://doc.rust-lang.org/nightly/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.unit.html">()</a>, &amp;'static <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.str.html">str</a>&gt;</h4></section></summary><div class="docblock"><p>Wait until reaching the given deadline.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../../trait.impl/ixgbe_driver/hal/trait.IxgbeHal.js" async></script></section></div></main></body></html>